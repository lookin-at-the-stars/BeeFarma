<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeePharma - Sistema de Gest√£o Farmac√™utica</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <span class="bee-icon">üêù</span>
                <h1>BeePharma</h1>
            </div>
            <nav class="nav">
                <a href="#produtos" class="nav-link active" data-section="produtos">Produtos</a>
                <a href="#lotes" class="nav-link" data-section="lotes">Lotes</a>
                <a href="#estoque" class="nav-link" data-section="estoque">Estoque</a>
                <a href="#inventario" class="nav-link" data-section="inventario">Invent√°rio</a>
                <a href="#producao" class="nav-link" data-section="producao">Produ√ß√£o</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Dashboard Overview -->
            <section id="dashboard" class="dashboard">
                <h2>Dashboard <span class="honeycomb">üçØ</span></h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üì¶</div>
                        <div class="stat-info">
                            <h3 id="total-produtos">0</h3>
                            <p>Produtos Cadastrados</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üè∑Ô∏è</div>
                        <div class="stat-info">
                            <h3 id="total-lotes">0</h3>
                            <p>Lotes Ativos</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-info">
                            <h3 id="total-movimentos">0</h3>
                            <p>Movimenta√ß√µes</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚öôÔ∏è</div>
                        <div class="stat-info">
                            <h3 id="total-ordens">0</h3>
                            <p>Ordens de Produ√ß√£o</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Produtos Section -->
            <section id="produtos" class="section active">
                <div class="section-header">
                    <h2>Produtos üì¶</h2>
                    <button class="btn btn-primary" onclick="showModal('modalProduto')">
                        <span>‚ûï</span> Novo Produto
                    </button>
                </div>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>C√≥digo ANVISA</th>
                                <th>Classe Terap√™utica</th>
                                <th>Unidade</th>
                                <th>Descri√ß√£o</th>
                                <th>Criado em</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="produtos-table-body">
                            <tr>
                                <td colspan="7" class="loading">
                                    <div class="spinner"></div>
                                    Carregando produtos...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Lotes Section -->
            <section id="lotes" class="section">
                <div class="section-header">
                    <h2>Lotes üè∑Ô∏è</h2>
                    <button class="btn btn-primary" onclick="showModal('modalLote')">
                        <span>‚ûï</span> Novo Lote
                    </button>
                </div>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>N√∫mero do Lote</th>
                                <th>Produto</th>
                                <th>Quantidade</th>
                                <th>Validade</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="lotes-table-body">
                            <tr>
                                <td colspan="6" class="loading">
                                    <div class="spinner"></div>
                                    Carregando lotes...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Estoque Section -->
            <section id="estoque" class="section">
                <div class="section-header">
                    <h2>Movimentos de Estoque üìä</h2>
                    <button class="btn btn-primary" onclick="showModal('modalMovimento')">
                        <span>‚ûï</span> Registrar Movimento
                    </button>
                </div>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Data/Hora</th>
                                <th>Tipo</th>
                                <th>Produto</th>
                                <th>Quantidade</th>
                                <th>Motivo</th>
                            </tr>
                        </thead>
                        <tbody id="estoque-table-body">
                            <tr>
                                <td colspan="5" class="loading">
                                    <div class="spinner"></div>
                                    Carregando movimentos...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Invent√°rio Section -->
            <section id="inventario" class="section">
                <div class="section-header">
                    <h2>Invent√°rio üìã</h2>
                    <button class="btn btn-primary" onclick="showModal('modalInventario')">
                        <span>‚ûï</span> Novo Item
                    </button>
                </div>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Produto</th>
                                <th>Localiza√ß√£o</th>
                                <th>Qtd. F√≠sica</th>
                                <th>Qtd. Sistema</th>
                                <th>Diferen√ßa</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="inventario-table-body">
                            <tr>
                                <td colspan="6" class="loading">
                                    <div class="spinner"></div>
                                    Carregando invent√°rio...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Produ√ß√£o Section -->
            <section id="producao" class="section">
                <div class="section-header">
                    <h2>Ordens de Produ√ß√£o ‚öôÔ∏è</h2>
                    <button class="btn btn-primary" onclick="showModal('modalOrdemProducao')">
                        <span>‚ûï</span> Nova Ordem
                    </button>
                </div>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>N√∫mero</th>
                                <th>Produto</th>
                                <th>Quantidade</th>
                                <th>Prioridade</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="producao-table-body">
                            <tr>
                                <td colspan="6" class="loading">
                                    <div class="spinner"></div>
                                    Carregando ordens...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </main>

    <!-- Modal Produto -->
    <div id="modalProduto" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Novo Produto</h3>
                <button class="close" onclick="closeModal('modalProduto')">&times;</button>
            </div>
            <form id="formProduto" onsubmit="salvarProduto(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label for="nome">Nome *</label>
                        <input type="text" id="nome" name="nome" required>
                    </div>
                    <div class="form-group">
                        <label for="codigoAnvisa">C√≥digo ANVISA</label>
                        <input type="text" id="codigoAnvisa" name="codigoAnvisa" 
                               pattern="[0-9]{1,13}" 
                               title="Digite apenas n√∫meros (m√°ximo 13 d√≠gitos)">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="unidade">Unidade *</label>
                        <input type="text" id="unidade" name="unidade" required placeholder="Ex: Comprimido, Frasco, Caixa">
                    </div>
                    <div class="form-group">
                        <label for="principioAtivo">Princ√≠pio Ativo *</label>
                        <input type="text" id="principioAtivo" name="principioAtivo" required placeholder="Ex: Paracetamol, Dipirona">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="classeTerapeutica">Classe Terap√™utica</label>
                        <input type="text" id="classeTerapeutica" name="classeTerapeutica" placeholder="Ex: Analg√©sico, Antibi√≥tico">
                    </div>
                </div>
                <div class="form-group">
                    <label for="descricao">Descri√ß√£o</label>
                    <textarea id="descricao" name="descricao" rows="4" placeholder="Descri√ß√£o detalhada do produto..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalProduto')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Lote -->
    <div id="modalLote" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Novo Lote</h3>
                <button class="close" onclick="closeModal('modalLote')">&times;</button>
            </div>
            <form id="formLote" onsubmit="salvarLote(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label for="loteNumero">N√∫mero do Lote *</label>
                        <input type="text" id="loteNumero" name="numeroLote" required>
                    </div>
                    <div class="form-group">
                        <label for="loteProduto">Produto *</label>
                        <select id="loteProduto" name="produtoId" required>
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="loteQuantidade">Quantidade *</label>
                        <input type="number" id="loteQuantidade" name="quantidade" required>
                    </div>
                    <div class="form-group">
                        <label for="loteFornecedor">Fornecedor</label>
                        <input type="text" id="loteFornecedor" name="fornecedor">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="loteDataFabricacao">Data Fabrica√ß√£o *</label>
                        <input type="date" id="loteDataFabricacao" name="dataFabricacao" required>
                    </div>
                    <div class="form-group">
                        <label for="loteDataValidade">Data Validade *</label>
                        <input type="date" id="loteDataValidade" name="dataValidade" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="loteNotaFiscal">N√∫mero da Nota Fiscal</label>
                    <input type="text" id="loteNotaFiscal" name="numeroNotaFiscal">
                </div>
                <div class="form-group">
                    <label for="loteObservacoes">Observa√ß√µes</label>
                    <textarea id="loteObservacoes" name="observacoes" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalLote')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Movimento -->
    <div id="modalMovimento" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Registrar Movimento</h3>
                <button class="close" onclick="closeModal('modalMovimento')">&times;</button>
            </div>
            <form id="formMovimento" onsubmit="salvarMovimento(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label for="movTipo">Tipo *</label>
                        <select id="movTipo" name="tipo" required>
                            <option value="ENTRADA">Entrada</option>
                            <option value="SAIDA">Sa√≠da</option>
                            <option value="AJUSTE">Ajuste</option>
                            <option value="TRANSFERENCIA">Transfer√™ncia</option>
                            <option value="DEVOLUCAO">Devolu√ß√£o</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="movQuantidade">Quantidade *</label>
                        <input type="number" id="movQuantidade" name="quantidade" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="movProduto">Produto *</label>
                        <select id="movProduto" name="produtoId" required onchange="carregarLotesPorProduto(this.value)">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="movLote">Lote *</label>
                        <select id="movLote" name="loteId" required>
                            <option value="">Selecione o produto primeiro...</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="movMotivo">Motivo *</label>
                    <input type="text" id="movMotivo" name="motivo" required>
                </div>
                <div class="form-group">
                    <label for="movObservacoes">Observa√ß√µes</label>
                    <textarea id="movObservacoes" name="observacoes" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalMovimento')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Invent√°rio -->
    <div id="modalInventario" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Novo Item de Invent√°rio</h3>
                <button class="close" onclick="closeModal('modalInventario')">&times;</button>
            </div>
            <form id="formInventario" onsubmit="salvarInventario(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label for="invProduto">Produto *</label>
                        <select id="invProduto" name="produtoId" required onchange="carregarLotesPorProduto(this.value, 'invLote')">
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="invLote">Lote *</label>
                        <select id="invLote" name="loteId" required>
                            <option value="">Selecione o produto primeiro...</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="invLocalizacao">Localiza√ß√£o *</label>
                        <input type="text" id="invLocalizacao" name="localizacao" required placeholder="Ex: Prateleira A1">
                    </div>
                    <div class="form-group">
                        <label for="invResponsavel">Respons√°vel</label>
                        <input type="text" id="invResponsavel" name="responsavel">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="invQuantidadeFisica">Quantidade F√≠sica *</label>
                        <input type="number" id="invQuantidadeFisica" name="quantidadeFisica" required>
                    </div>
                    <div class="form-group">
                        <label for="invQuantidadeSistema">Quantidade Sistema *</label>
                        <input type="number" id="invQuantidadeSistema" name="quantidadeSistema" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="invDataContagem">Data da Contagem *</label>
                    <input type="datetime-local" id="invDataContagem" name="dataContagem" required>
                </div>
                <div class="form-group">
                    <label for="invObservacoes">Observa√ß√µes</label>
                    <textarea id="invObservacoes" name="observacoes" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalInventario')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Ordem de Produ√ß√£o -->
    <div id="modalOrdemProducao" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Nova Ordem de Produ√ß√£o</h3>
                <button class="close" onclick="closeModal('modalOrdemProducao')">&times;</button>
            </div>
            <form id="formOrdemProducao" onsubmit="salvarOrdemProducao(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label for="opNumero">N√∫mero da Ordem *</label>
                        <input type="text" id="opNumero" name="numeroOrdem" required>
                    </div>
                    <div class="form-group">
                        <label for="opProduto">Produto *</label>
                        <select id="opProduto" name="produtoId" required>
                            <option value="">Selecione...</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="opQuantidade">Quantidade Planejada *</label>
                        <input type="number" id="opQuantidade" name="quantidadePlanejada" required>
                    </div>
                    <div class="form-group">
                        <label for="opPrioridade">Prioridade *</label>
                        <select id="opPrioridade" name="prioridade" required>
                            <option value="BAIXA">Baixa</option>
                            <option value="MEDIA">M√©dia</option>
                            <option value="ALTA">Alta</option>
                            <option value="URGENTE">Urgente</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="opDataInicio">Previs√£o de In√≠cio *</label>
                        <input type="datetime-local" id="opDataInicio" name="dataPrevisaoInicio" required>
                    </div>
                    <div class="form-group">
                        <label for="opDataFim">Previs√£o de Fim *</label>
                        <input type="datetime-local" id="opDataFim" name="dataPrevisaoFim" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="opObservacoes">Observa√ß√µes</label>
                    <textarea id="opObservacoes" name="observacoes" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modalOrdemProducao')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <script src="app.js?v=20250108"></script>
</body>
</html>
